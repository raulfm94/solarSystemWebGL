<html>
	<head>
	<meta charset="utf8">
	<title>Solar System</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css"
	 integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
	 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" />
	 <link rel="stylesheet" href="styles.css">
	<script src="three.min.js"></script>

	<script src="js/TrackballControls.js"></script>

	<script src="js/Detector.js"></script>
	<script src="js/stats.min.js"></script>
	<!-- <script src="CanvasRenderer.js"></script> -->
	</head>
	<body>
		<nav>
			<div class="container">
				<div class="row">
				 <div class="icon min col s1"><img src="img/mercury-icon.jpeg" alt="" width="30px"><div class="text">Mercury</div></div>
				 <div class="icon min col s1"><img src="img/venus-icon.jpg" alt="" ><div class="text">Venus</div></div>
				 <div class="icon col s1"><img src="img/earth-icon.jpg" onclick="earthZoom();" alt="" ><div class="text">Earth</div></div>
				 <div class="icon min col s1"><img src="img/mars-icon.jpeg" alt="" ><div class="text">Mars</div></div>
				 <div class="icon min col s1"><img src="img/jupiter-icon.png" alt="" ><div class="text">Jupiter</div></div>
				 <div class="icon col s1"><img src="img/saturn-icon.jpg" alt="" ><div class="text">Saturn</div></div>
				 <div class="icon col s1"><img src="img/uranus-icon.jpg" alt="" ><div class="text">Uranus</div></div>
				 <div class="icon min col s1"><img src="img/neptune-icon.jpg" alt="" ><div class="text">Neptune</div></div>
				 <div class="icon min col s1"><img src="img/pluto-icon.jpeg" alt="" ><div class="text">Pluto</div></div>
				 <div class="icon min col s1"><i class="fa fa-space-shuttle" aria-hidden="true"></i>Explore</div></div>
			 </div>
		</nav>
		<div id="container"></div>
		<script>

			if ( ! Detector.webgl ) Detector.addGetWebGLMessage();

			var container, stats;
			var scene, camera, renderer, controls;
			var sun, mercury, venus, earth, mars, jupiter, saturn, uranus, neptune, ring;
			var t = 0;
			var y = 0;

			var light;
			//var target = scene;

			var Orbit = function(radius) {
				this.radius = radius;

				this.draw = function(scene){
					var og = new THREE.Geometry();
					var om = new THREE.PointsMaterial({color: 0xbfbfbf, size:1, sizeAttenuation: false});
					for(var i = 0; i<50000;i++){
						var v = new THREE.Vector3();
						v.x = Math.sin(Math.PI/180*i)*this.radius;
						v.z = Math.cos(Math.PI/180*i)*this.radius;
						og.vertices.push(v);
					}
					var obj = new THREE.Points(og,om);
					scene.add(obj);
				};
			};

			init();
			animate();

			function init() {

				camera = new THREE.PerspectiveCamera(45,window.innerWidth / window.innerHeight,1,1000000);
				camera.position.z = 200000;
				// camera.position.y = 5000;
				// camera.rotation.z = -Math.PI.20;

				scene = new THREE.Scene();
				scene.add(camera);

				//Camera for movement
				controls = new THREE.TrackballControls (camera);

				controls.rotateSpeed = 1.0;
				controls.zoomSpeed = 1.2;
				controls.panSpeed = 0.8;

				controls.noZoom = false;
				controls.noPan = false;

				controls.staticMoving = true;
				controls.dynamicDampingFactor = 0.3

				controls.keys = [65, 83, 68];

				controls.addEventListener( 'change', render);

				
				light = new THREE.PointLight(0xffffff,1.7,200000);
				light.position.set(0,0,0);
				light.castShadow = true;
				//light.mapSize.width = 2048;
				//light.mapSize.heigth = 2048;
				scene.add(light);

				// Code....
				// Texture solution
				var loader = new THREE.TextureLoader();
				loader.load( 'sun2.png', function (texture) {

					// Sun
					var sun_geom, sun_mat;
					sun_geom = new THREE.SphereGeometry(2300,80,80);

					// var texture = THREE.TextureLoader( 'sun2.png' );
					//texture.anisotropy = 8;
					sun_mat = new THREE.MeshBasicMaterial( { map: texture, emissive: 0xffffff});
					sun = new THREE.Mesh(sun_geom,sun_mat);
					scene.add(sun);

				} );

				// Mercury
				loader.load( 'img/mercurymap.jpg', function (mercury_texture) {

					// Mercury
					var mercury_geom, mercury_mat;
					mercury_geom = new THREE.SphereGeometry(60,20,20);

					//var mercury_texture = THREE.TextureLoader().load('img/mercurymap.jpg')

					mercury_mat = new THREE.MeshBasicMaterial( {map: mercury_texture});
					mercury = new THREE.Mesh(mercury_geom, mercury_mat);
					scene.add(mercury);

				} );

				loader.load( 'img/venusmap.jpg', function (venus_texture) {

					// Venus
					var venus_geom, venus_mat;
					venus_geom = new THREE.SphereGeometry(90,20,20);

					//var venus_texture = THREE.TextureLoader().load('img/venusmap.jpg')

					venus_mat = new THREE.MeshBasicMaterial( {map: venus_texture});
					venus = new THREE.Mesh(venus_geom, venus_mat);
					scene.add(venus);

				} );


				// Earth
				loader.load( 'earth.jpg', function (texture2) {

					// Earth
					var earth_geom, earth_mat;
					earth_geom = new THREE.SphereGeometry(100,20,20);

					//var texture2 = THREE.TextureLoader('earth.jpg');
					//texture2.anisotropy = 8;
					earth_mat = new THREE.MeshBasicMaterial( {map: texture2});
					earth = new THREE.Mesh(earth_geom,earth_mat);
					//earth.position.x = 1500;
					scene.add(earth);

				} );

				// Earth Orbit
				var earth_orbit_geom = new THREE.Geometry();
				var earth_orbit_mat = new THREE.PointsMaterial( {color: 0x3A3A3A, opacity:0.3, size:1, sizeAttenuation: false});

				for(var i=0;i<20000;i++){
					var vertex = new THREE.Vector3();
					vertex.x = Math.sin(Math.PI/180*i)*30000;
					vertex.z = Math.cos(Math.PI/180*i)*30000;
					earth_orbit_geom.vertices.push(vertex);
				}

				var earth_orbit = new THREE.Points(earth_orbit_geom,earth_orbit_mat);
				earth_orbit.castShadow = true;
				scene.add(earth_orbit); // 0 0 0


				loader.load( 'img/marsmap.jpg', function (mars_texture) {

					// Mars
					var mars_geom, mars_mat;
					mars_geom = new THREE.SphereGeometry(80,20,20);

					//var mars_texture = THREE.TextureLoader().load('img/marsmap.jpg')

					mars_mat = new THREE.MeshBasicMaterial( {map: mars_texture});
					mars = new THREE.Mesh(mars_geom, mars_mat);
					scene.add(mars);

				} );


				loader.load( 'img/jupitermap.jpg', function (jupiter_texture) {

					//Jupiter
					var jupiter_geom, jupiter_mat;
					jupiter_geom = new THREE.SphereGeometry(350,20,20);

					//var jupiter_texture = THREE.TextureLoader().load('img/jupitermap.jpg')

					jupiter_mat = new THREE.MeshBasicMaterial( {map: jupiter_texture});
					jupiter = new THREE.Mesh(jupiter_geom, jupiter_mat);
					jupiter.castShadow = true;
					scene.add(jupiter);

				} );


				loader.load( 'img/saturnmap.jpg', function (saturn_texture) {

					// Saturn
					var saturn_geom, saturn_mat;
					saturn_geom = new THREE.SphereGeometry(230,20,20);

					//var saturn_texture = THREE.TextureLoader().load('img/saturnmap.jpg')

					saturn_mat = new THREE.MeshBasicMaterial( {map: saturn_texture});
					saturn = new THREE.Mesh(saturn_geom, saturn_mat);
					scene.add(saturn);

				} );

				// Saturn Rings
				var ring_saturn_geom = new THREE.Geometry();
				var ring_saturn_mat = new THREE.PointsMaterial( {color: 0x3A3A3A, opacity:0.3, size:1, sizeAttenuation: false});

				for(var i=0;i<20000;i++){
					var vertex = new THREE.Vector3();
					vertex.x = Math.sin(Math.PI/180*i)*(550-i/80);
					vertex.y = Math.random()*20;
					vertex.z = Math.cos(Math.PI/180*i)*(550-i/80);
					ring_saturn_geom.vertices.push(vertex);
				}

				ring = new THREE.Points(ring_saturn_geom,ring_saturn_mat);
				ring.castShadow = true;
				scene.add(ring); // 0 0 0



				loader.load( 'img/uranusmap.jpg', function (uranus_texture) {

					// Neptune
					var uranus_geom, uranus_mat;
					uranus_geom = new THREE.SphereGeometry(170,40,40);

					//var saturn_texture = THREE.TextureLoader().load('img/saturnmap.jpg')

					uranus_mat = new THREE.MeshBasicMaterial( {map: uranus_texture});
					uranus = new THREE.Mesh(uranus_geom, uranus_mat);
					scene.add(uranus);

				} );

				loader.load( 'img/neptunemap.jpg', function (neptune_texture) {

					// Neptune
					var neptune_geom, neptune_mat;
					neptune_geom = new THREE.SphereGeometry(160,40,40);

					//var saturn_texture = THREE.TextureLoader().load('img/saturnmap.jpg')

					neptune_mat = new THREE.MeshBasicMaterial( {map: neptune_texture});
					neptune = new THREE.Mesh(neptune_geom, neptune_mat);
					scene.add(neptune);

				} );

				// // Sun
				// var sun_geom, sun_mat;
				// sun_geom = new THREE.SphereGeometry(2030,80,80);
				// var texture = THREE.TextureLoader( 'sun2.png' );
				// //texture.anisotropy = 8;
				// sun_mat = new THREE.MeshBasicMaterial( {map: texture});
				// sun = new THREE.Mesh(sun_geom,sun_mat);
				// scene.add(sun);

				// // Earth
				// var earth_geom, earth_mat;
				// earth_geom = new THREE.SphereGeometry(50,20,20);
				// var texture2 = THREE.TextureLoader('earth.jpg');
				// //texture2.anisotropy = 8;
				// earth_mat = new THREE.MeshBasicMaterial( {map: texture2});
				// earth = new THREE.Mesh(earth_geom,earth_mat);
				// //earth.position.x = 1500;
				// scene.add(earth);

				// Stars
				var starsGeometry = new THREE.Geometry();
				var starsMaterial = new THREE.PointsMaterial({color:0xbbbbbb,opacity:0.5,size:1,sizeAttenuation:false});
				var stars;

				for(var i=0; i<3000; i++) {
					var vertex = new THREE.Vector3();
					vertex.x = Math.random()*2-1;
					vertex.y = Math.random()*2-1;
					vertex.z = Math.random()*2-1;
					vertex.multiplyScalar(6000);
					starsGeometry.vertices.push(vertex);
				}

				stars = new THREE.Points(starsGeometry,starsMaterial);
				stars.scale.set(50,50,-50);
				scene.add(stars);

				var starsGeometry2 = new THREE.Geometry();
				var starsMaterial2 = new THREE.PointsMaterial({color:0xbbbbb,opacity:0.8,size:1,sizeAttenuation:false});
				var stars2;

				for(var i=0; i<3000; i++) {
					var vertex = new THREE.Vector3();
					vertex.x = Math.random()*2-1;
					vertex.y = Math.random()*2-1;
					vertex.z = Math.random()*2-1;
					vertex.multiplyScalar(6000);
					starsGeometry2.vertices.push(vertex);
				}

				stars2 = new THREE.Points(starsGeometry2,starsMaterial2);
				stars2.scale.set(70,150,-100);
				scene.add(stars2);

				// Ambient
				var ambient = new THREE.AmbientLight(0x222222);
				scene.add(ambient);

				// Orbits for all planets
				var mercury_orbit = new Orbit(8000);
				mercury_orbit.draw(scene);

				var venus_orbit = new Orbit(17000);
				venus_orbit.draw(scene);

				var mars_orbit = new Orbit(50000);
				mars_orbit.draw(scene);

				var jupiter_orbit = new Orbit(74000);
				jupiter_orbit.draw(scene);

				var saturn_orbit = new Orbit(98000);
				saturn_orbit.draw(scene);

				var uranus_orbit = new Orbit(120000);
				uranus_orbit.draw(scene);

				var neptune_orbit = new Orbit(180000);
				neptune_orbit.draw(scene);


				// Renderer

				renderer = new THREE.WebGLRenderer( {antialias: false});
				renderer.setPixelRatio(window.devicePixelRatio);
				renderer.setSize(window.innerWidth, window.innerHeight);


				container = document.getElementById( 'container');
				container.appendChild(renderer.domElement);

				stats = new Stats();
				container.appendChild(stats.dom);

				window.addEventListener('resize', onWindowResize, false);

				// document.addEventListener('mousemove', function (event) {
				// 	y = parseInt(event.offsetY);
				// });

				render();
			}

			function onWindowResize(){

				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();

				renderer.setSize(window.innerWidth, window.innerHeight);

				controls.handleResize();

				render();
			}



			function animate(){

				requestAnimationFrame(animate);

				sun.rotation.y += 0.001;

				controls.update(0.01);

				
				mercury.position.x = Math.sin(t*0.3)*8000;
				mercury.position.z = Math.cos(t*0.3)*8000;

				
				venus.position.x = Math.sin(t*0.2)*17000;
				venus.position.z = Math.cos(t*0.2)*17000;

				earth.position.x = Math.sin(t*0.1)*30000;
				earth.position.z = Math.cos(t*0.1)*30000;

				mars.position.x = Math.sin(t*0.08)*50000;
				mars.position.z = Math.cos(t*0.08)*50000;
				
				jupiter.position.x = Math.sin(t*0.06)*(-74000);
				jupiter.position.z = Math.cos(t*0.06)*(-74000);

				saturn.position.x = Math.sin(t*0.04)*98000;
				saturn.position.z = Math.cos(t*0.04)*98000;

				ring.position.x = saturn.position.x;
				ring.position.z = saturn.position.z;
				ring.rotation.y -= 0.001; //use oposite

				uranus.position.x = Math.sin(t*0.02)*120000;
				uranus.position.z = Math.cos(t*0.02)*120000;

				neptune.position.x = Math.sin(t*0.01)*180000;
				neptune.position.z = Math.cos(t*0.01)*180000;				

				// camera.position.z = earth.position.z + 100;
				// camera.position.x = earth.position.x + 100;
				// camera.lookAt(earth.position);

				mercury.rotation.y -= 0.01;
				venus.rotation.y -= 0.01;
				earth.rotation.y -= 0.01;
				mars.rotation.y -= 0.01;
				jupiter.rotation.y -= 0.01;
				saturn.rotation.y -= 0.01;

				neptune.rotation.y -= 0.01;
				uranus.rotation.y -= 0.01

				t += Math.PI/180*2;

				// camera.position.z = venus.position.z + 1000;
				// camera.position.x = venus.position.x + 1000;

				// camera.lookAt(scene.position);

				// camera.lookAt(scene.position);

				// render.render(scene,camera);
				// if(camera.position.z>mercury.position.z-100){
				// 	camera.position.z-=80;
				// 	camera.lookAt(mercury.position);	
				// }
				// if(camera.position.x<mercury.position.x-300){
				// 	camera.position.x+=30;	
				// }

				renderer.render(scene, camera);
			}

			function render () {
				
				//renderer.render(scene, camera);
				stats.update();
				console.log("Render Function");
			}

			function earthZoom () {
				
				//target = earth;
				console.log("Earth Zoom");
				
			}

			function freeCamera() {

				console.log("Free Camera");


			}

		</script>
	</body>
</html>
