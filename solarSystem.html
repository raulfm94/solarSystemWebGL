<html>
	<head>
	<meta charset="utf8">
	<title>Solar System</title>
	<style>
			body {
				background: black;
				margin: 0px;
			}
	</style>
	<script src="three.min.js"></script>
	<!-- <script src="CanvasRenderer.js"></script> -->
	</head>
	<body>
		<script>
			var scene, camera, render;
			var sun, earth;
			var t = 0;
			var y = 0;

			init();
			animate();

			function init() {

				camera = new THREE.PerspectiveCamera(45,window.innerWidth / window.innerHeight,1,1000000);
				camera.position.z = 39300;

				scene = new THREE.Scene();


				// Code....
				// Texture solution
				var loader = new THREE.TextureLoader();
				loader.load( 'sun2.png', function (texture) {

					// Sun
					var sun_geom, sun_mat;
					sun_geom = new THREE.SphereGeometry(2030,80,80);
					
					// var texture = THREE.TextureLoader( 'sun2.png' );
					//texture.anisotropy = 8;
					sun_mat = new THREE.MeshBasicMaterial( { map: texture, overdraw: 0.5 });
					sun = new THREE.Mesh(sun_geom,sun_mat);
					scene.add(sun);					

				} );

				loader.load( 'earth.jpg', function (texture2) {
				
					// Earth
					var earth_geom, earth_mat;
					earth_geom = new THREE.SphereGeometry(50,20,20);
					
					//var texture2 = THREE.TextureLoader('earth.jpg');
					//texture2.anisotropy = 8;
					earth_mat = new THREE.MeshBasicMaterial( {map: texture2, overdraw: 0.5 });
					earth = new THREE.Mesh(earth_geom,earth_mat);
					//earth.position.x = 1500;
					scene.add(earth);

				} );

				// // Sun
				// var sun_geom, sun_mat;
				// sun_geom = new THREE.SphereGeometry(2030,80,80);
				// var texture = THREE.TextureLoader( 'sun2.png' );
				// //texture.anisotropy = 8;
				// sun_mat = new THREE.MeshBasicMaterial( {map: texture});
				// sun = new THREE.Mesh(sun_geom,sun_mat);
				// scene.add(sun);

				// // Earth
				// var earth_geom, earth_mat;
				// earth_geom = new THREE.SphereGeometry(50,20,20);
				// var texture2 = THREE.TextureLoader('earth.jpg');
				// //texture2.anisotropy = 8;
				// earth_mat = new THREE.MeshBasicMaterial( {map: texture2});
				// earth = new THREE.Mesh(earth_geom,earth_mat);
				// //earth.position.x = 1500;
				// scene.add(earth);

				// Stars
				var starsGeometry = new THREE.Geometry();
				var starsMaterial = new THREE.PointsMaterial({color:0xbbbbbb,opacity:0.6,size:1,sizeAttenuation:false});
				var stars;

				for(var i=0; i<45000; i++) {
					var vertex = new THREE.Vector3();
					vertex.x = Math.random()*2-1;
					vertex.y = Math.random()*2-1;
					vertex.z = Math.random()*2-1;
					vertex.multiplyScalar(6000);
					starsGeometry.vertices.push(vertex);
				}

				stars = new THREE.Points(starsGeometry,starsMaterial);
				stars.scale.set(50,50,50);
				scene.add(stars);

				var starsGeometry2 = new THREE.Geometry();
				var starsMaterial2 = new THREE.PointsMaterial({color:0xbbbbb,opacity:0.6,size:1,sizeAttenuation:false});
				var stars2;

				for(var i=0; i<10000; i++) {
					var vertex = new THREE.Vector3();
					vertex.x = Math.random()*2-1;
					vertex.y = Math.random()*2-1;
					vertex.z = Math.random()*2-1;
					vertex.multiplyScalar(6000);
					starsGeometry2.vertices.push(vertex);
				}

				stars2 = new THREE.Points(starsGeometry2,starsMaterial2);
				stars2.scale.set(70,150,100);
				scene.add(stars2);

				// Ambient
				var ambient = new THREE.AmbientLight(0xbbbbb);
				scene.add(ambient);


				render = new THREE.WebGLRenderer();
				render.setPixelRatio(window.devicePixelRatio);
				render.setSize(window.innerWidth, window.innerHeight);
				document.body.appendChild(render.domElement);

				window.addEventListener('resize', onWindowResize, false);
				document.addEventListener('mousemove', function (event) {
					y = parseInt(event.offsetY);
				});
			}

			function onWindowResize(){

				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();

				render.setSize(window.innerWidth, window.innerHeight);
			}

			function animate(){

				requestAnimationFrame(animate);

				sun.rotation.y += 0.005;
				earth.rotation.y -= 0.01;
				earth.position.x = Math.sin(t*0.1)*7500;
				earth.position.z = Math.cos(t*0.1)*7500;

				t += Math.PI/180*2;

				camera.position.z = earth.position.z + 1000;
				camera.position.x = earth.position.x + 1000;

				camera.lookAt(earth.position);

				render.render(scene,camera);
			}

		</script>
	</body>
</html>

